Documentation originale :
https://github.com/qbittorrent/qBittorrent/wiki/Compiling-with-MSVC-2015-%28static-linkage%29

Remplacer "D:\Dev\Personal\qBittorrent" par "D:\Dev\Personal\qBittorrent"


I. Preparation:
Ouvrir une invite de commande des outils natifs x86 depuis le menu demarrer
cd D:\Dev\Personal\qBittorrent\dependencies

1. Compilation de la zlib:
cd zlib-1.2.8
nmake -f win32/Makefile.msc LOC="-DASMV -DASMINF" OBJA="inffas32.obj match686.obj"

xcopy zlib.h D:\Dev\Personal\qBittorrent\install_msvc\base\include\
xcopy zconf.h D:\Dev\Personal\qBittorrent\install_msvc\base\include\
xcopy zlib.lib D:\Dev\Personal\qBittorrent\install_msvc\base\lib\


3. Compilation de boost:

cd ..\boost_1_64_0
bootstrap.bat

b2 -q --with-system --toolset=msvc-14.0 variant=debug link=static runtime-link=shared debug-symbols=on include="D:\Dev\Personal\qBittorrent\install_msvc\base\include" library-path="D:\Dev\Personal\qBittorrent\install_msvc\base\lib" --prefix="D:\Dev\Personal\qBittorrent\install_msvc\base" define=_USING_V110_SDK71_ define=BOOST_ASIO_DISABLE_CONNECTEX define=BOOST_USE_WINAPI_VERSION=0x0501 cxxflags=/arch:IA32 --hash -j 4
b2 -q --with-system --toolset=msvc-14.0 variant=debug link=static runtime-link=shared debug-symbols=on include="D:\Dev\Personal\qBittorrent\install_msvc\base\include" library-path="D:\Dev\Personal\qBittorrent\install_msvc\base\lib" --prefix="D:\Dev\Personal\qBittorrent\install_msvc\base" define=_USING_V110_SDK71_ define=BOOST_ASIO_DISABLE_CONNECTEX define=BOOST_USE_WINAPI_VERSION=0x0501 cxxflags=/arch:IA32 --hash -j 4 install

b2 -q --with-system --toolset=msvc-14.0 variant=release link=static runtime-link=shared debug-symbols=off include="D:\Dev\Personal\qBittorrent\install_msvc\base\include" library-path="D:\Dev\Personal\qBittorrent\install_msvc\base\lib" --prefix="D:\Dev\Personal\qBittorrent\install_msvc\base" define=_USING_V110_SDK71_ define=BOOST_ASIO_DISABLE_CONNECTEX define=BOOST_USE_WINAPI_VERSION=0x0501 cxxflags=/arch:IA32 --hash -j 4
b2 -q --with-system --toolset=msvc-14.0 variant=release link=static runtime-link=shared debug-symbols=off include="D:\Dev\Personal\qBittorrent\install_msvc\base\include" library-path="D:\Dev\Personal\qBittorrent\install_msvc\base\lib" --prefix="D:\Dev\Personal\qBittorrent\install_msvc\base" define=_USING_V110_SDK71_ define=BOOST_ASIO_DISABLE_CONNECTEX define=BOOST_USE_WINAPI_VERSION=0x0501 cxxflags=/arch:IA32 --hash -j 4 install

4. Compilation de la libtorrent:

cd ..\libtorrent-rasterbar-1.1.3
copy ..\boost_1_64_0\b2.exe b2.exe

b2 -q --without-python --toolset=msvc-14.0 variant=debug link=static runtime-link=shared debug-symbols=on encryption=on logging=off resolve-countries=off dht=on character-set=unicode boost-link=static -sBOOST_ROOT="D:\Dev\Personal\qBittorrent\dependencies\boost_1_64_0" include="D:\Dev\Personal\qBittorrent\install_msvc\base\include" library-path="D:\Dev\Personal\qBittorrent\install_msvc\base\lib" --prefix="D:\Dev\Personal\qBittorrent\install_msvc\base" define=_USING_V110_SDK71_ define=BOOST_ASIO_DISABLE_CONNECTEX define=BOOST_USE_WINAPI_VERSION=0x0501 cxxflags=/arch:IA32 --hash -j 4
b2 -q --without-python --toolset=msvc-14.0 variant=debug link=static runtime-link=shared debug-symbols=on encryption=on logging=off resolve-countries=off dht=on character-set=unicode boost-link=static -sBOOST_ROOT="D:\Dev\Personal\qBittorrent\dependencies\boost_1_64_0" include="D:\Dev\Personal\qBittorrent\install_msvc\base\include" library-path="D:\Dev\Personal\qBittorrent\install_msvc\base\lib" --prefix="D:\Dev\Personal\qBittorrent\install_msvc\base" define=_USING_V110_SDK71_ define=BOOST_ASIO_DISABLE_CONNECTEX define=BOOST_USE_WINAPI_VERSION=0x0501 cxxflags=/arch:IA32 --hash -j 12 install
rename ..\..\install_msvc\base\lib\libtorrent.lib ..\..\install_msvc\base\lib\libtorrentd.lib

b2 -q --without-python --toolset=msvc-14.0 variant=release link=static runtime-link=shared debug-symbols=off encryption=on logging=off resolve-countries=off dht=on character-set=unicode boost-link=static -sBOOST_ROOT="D:\Dev\Personal\qBittorrent\dependencies\boost_1_64_0" include="D:\Dev\Personal\qBittorrent\install_msvc\base\include" library-path="D:\Dev\Personal\qBittorrent\install_msvc\base\lib" --prefix="D:\Dev\Personal\qBittorrent\install_msvc\base" define=_USING_V110_SDK71_ define=BOOST_ASIO_DISABLE_CONNECTEX define=BOOST_USE_WINAPI_VERSION=0x0501 cxxflags=/arch:IA32 --hash -j 4
b2 -q --without-python --toolset=msvc-14.0 variant=release link=static runtime-link=shared debug-symbols=off encryption=on logging=off resolve-countries=off dht=on character-set=unicode boost-link=static -sBOOST_ROOT="D:\Dev\Personal\qBittorrent\dependencies\boost_1_64_0" include="D:\Dev\Personal\qBittorrent\install_msvc\base\include" library-path="D:\Dev\Personal\qBittorrent\install_msvc\base\lib" --prefix="D:\Dev\Personal\qBittorrent\install_msvc\base" define=_USING_V110_SDK71_ define=BOOST_ASIO_DISABLE_CONNECTEX define=BOOST_USE_WINAPI_VERSION=0x0501 cxxflags=/arch:IA32 --hash -j 12 install